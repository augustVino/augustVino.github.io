(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{679:function(t,a,n){"use strict";n.r(a);var e=n(59),s=Object(e.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"h5-唤起支付宝支付并签约"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#h5-唤起支付宝支付并签约"}},[t._v("#")]),t._v(" H5 唤起支付宝支付并签约")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),n("p",[t._v("本文档只是本人公司项目实践总结，不同公司开发逻辑可能有些许不同，但流程基本相同。")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://alipay.open.taobao.com/docs/doc.htm?spm=a219a.7629140.0.0.5f6f4b70ICkvt5&treeId=328&articleId=106401&docType=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝H5签约并支付官方文档"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"需求描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#需求描述"}},[t._v("#")]),t._v(" 需求描述")]),t._v(" "),n("ol",[n("li",[t._v("手机自带浏览器（或其他第三方浏览器），打开商品详情页面")]),t._v(" "),n("li",[t._v("用支付宝app扫描二维码（商品详情页面），进入商品详情页然后执行购买流程")])]),t._v(" "),n("p",[n("strong",[t._v("----\x3e")]),t._v(" 点击"),n("strong",[t._v("购买按钮")]),t._v("进入订单结算页面")]),t._v(" "),n("p",[n("strong",[t._v("----\x3e")]),t._v(" 点击"),n("strong",[t._v("确认支付")]),t._v("按钮唤起支付宝app并完成支付")]),t._v(" "),n("p",[n("strong",[t._v("----\x3e")]),t._v(" 支付完成后跳转回原浏览器，并展示相应的支付结果（成功 or 失败）。")]),t._v(" "),n("h2",{attrs:{id:"技术分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#技术分析"}},[t._v("#")]),t._v(" 技术分析")]),t._v(" "),n("table",[n("tr",[n("td",[n("center",[n("img",{attrs:{src:"/img/pay6.1-1.webp"}}),t._v("图1 商品详情页面")])],1),t._v(" "),n("td",[n("center",[n("img",{attrs:{src:"/img/pay6.1-2.webp"}}),t._v("图2 订单结算页面")])],1),t._v(" "),n("td",[n("center",[n("img",{attrs:{src:"/img/pay6.3-3.webp"}}),t._v("图3 支付宝app支付")])],1)])]),t._v(" "),n("ol",[n("li",[t._v("在"),n("strong",[t._v("商品详情")]),t._v("页面，点击 "),n("strong",[n("code",[t._v("￥19")])]),t._v(" 购买按钮，通过"),n("code",[t._v("location.href")]),t._v("跳转到"),n("strong",[t._v("订单结算")]),t._v("页（并把商品信息传递过去）。")]),t._v(" "),n("li",[n("strong",[t._v("订单结算")]),t._v("页面初始化时：\n"),n("ul",[n("li",[t._v("获取接收传递过来的商品信息("),n("code",[t._v("info")]),t._v(")；")]),t._v(" "),n("li",[t._v("用"),n("code",[t._v("info")]),t._v("调接口，创建订单、并获取订单号("),n("code",[t._v("orderId")]),t._v(")；")])])]),t._v(" "),n("li",[t._v("点击"),n("strong",[t._v("订单结算")]),t._v("页面的"),n("strong",[t._v("确认支付")]),t._v("按钮：\n"),n("ul",[n("li",[t._v("通过"),n("code",[t._v("orderId")]),t._v("和支付方式("),n("code",[t._v("zfbH5Pay")]),t._v(")调接口(同时展示loading，轮询获取支付结果)，获取支付跳转url("),n("code",[t._v("aliPayUrl")]),t._v(")，接口返回数据如下："),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"systemDate"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1566872472845")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"systemDate"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1566872472845"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliPayUrl"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_input_charset=utf-8&access_info={\\"channel\\":\\"ALIPAYAPP\\"}&external_sign_no=52357336&notify_url=http://paynotify.dangdang.com:8090/channel/agreeApplyNotify/MAIN/ALIPAYAGREEWAP&partner=2088331500182744&product_code=GENERAL_WITHHOLDING_P&return_url=&scene=INDUSTRY|APPSTORE&service=alipay.dut.customer.agreement.page.sign&sign=4de61e76d7c60f8bb1cda2af1ad0c3ea&sign_type=MD5"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"currentDate"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-08-27 10:21:12"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700916-45456"}},[t._v("copy success")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n    "systemDate": 1566872472845,\n    "status": {\n        "code": 0\n    },\n    "data": {\n        "systemDate": "1566872472845",\n        "aliPayUrl": "_input_charset=utf-8&access_info={\\"channel\\":\\"ALIPAYAPP\\"}&external_sign_no=52357336&notify_url=http://paynotify.dangdang.com:8090/channel/agreeApplyNotify/MAIN/ALIPAYAGREEWAP&partner=2088331500182744&product_code=GENERAL_WITHHOLDING_P&return_url=&scene=INDUSTRY|APPSTORE&service=alipay.dut.customer.agreement.page.sign&sign=4de61e76d7c60f8bb1cda2af1ad0c3ea&sign_type=MD5",\n        "currentDate": "2019-08-27 10:21:12"\n    }\n}\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700916-45456","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700916-18025"}},[t._v("Copy successed")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n    "systemDate": 1566872472845,\n    "status": {\n        "code": 0\n    },\n    "data": {\n        "systemDate": "1566872472845",\n        "aliPayUrl": "_input_charset=utf-8&access_info={\\"channel\\":\\"ALIPAYAPP\\"}&external_sign_no=52357336&notify_url=http://paynotify.dangdang.com:8090/channel/agreeApplyNotify/MAIN/ALIPAYAGREEWAP&partner=2088331500182744&product_code=GENERAL_WITHHOLDING_P&return_url=&scene=INDUSTRY|APPSTORE&service=alipay.dut.customer.agreement.page.sign&sign=4de61e76d7c60f8bb1cda2af1ad0c3ea&sign_type=MD5",\n        "currentDate": "2019-08-27 10:21:12"\n    }\n}\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700916-18025","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])])]),t._v(" "),n("li",[t._v("分端处理唤起支付宝app：\n"),n("ul",[n("li",[t._v("客户端"),n("code",[t._v("webview")]),t._v("内嵌h5："),n("div",{staticClass:"language-vue extra-class"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- vue --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("iframe")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myframe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("terminal=='ddandroid'"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("frameborder")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("0"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("iframe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...调接口获取aliPayUrl")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://render.alipay.com/p/s/i/?scheme="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alipays://platformapi/startapp?appId=20000067&url="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://mapi.alipay.com/gateway.do?"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("aliPayUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700916-56151"}},[t._v("copy success")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n<iframe\n    id="myframe"\n    v-if="terminal==\'ddandroid\'"\n    height="0"\n    width="0"\n    frameborder="0"\n    :src="url"\n></iframe>\n<script>\n    // ...调接口获取aliPayUrl\n\n    this.url = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));;\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700916-56151","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700916-77314"}},[t._v("Copy successed")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n<iframe\n    id="myframe"\n    v-if="terminal==\'ddandroid\'"\n    height="0"\n    width="0"\n    frameborder="0"\n    :src="url"\n></iframe>\n<script>\n    // ...调接口获取aliPayUrl\n\n    this.url = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));;\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700916-77314","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])])]),t._v(" "),n("li",[t._v("系统自带浏览器（包含部分第三方浏览器）："),n("div",{staticClass:"language-vue extra-class"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- vue --\x3e")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 调接口前,创建一个空窗口")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" blankLink "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"about:blank"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 调接口获取aliPayUrl")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...省略")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 为新窗口添加链接")]),t._v("\n    blankLink"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://render.alipay.com/p/s/i/?scheme="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alipays://platformapi/startapp?appId=20000067&url="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://mapi.alipay.com/gateway.do?"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("aliPayUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700917-84093"}},[t._v("copy success")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n\n<script>\n    // 1. 调接口前,创建一个空窗口\n    let blankLink = window.open("about:blank");\n\n    // 2. 调接口获取aliPayUrl\n    // ...省略\n\n    // 3. 为新窗口添加链接\n    blankLink.location = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700917-84093","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700917-16708"}},[t._v("Copy successed")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n\n<script>\n    // 1. 调接口前,创建一个空窗口\n    let blankLink = window.open("about:blank");\n\n    // 2. 调接口获取aliPayUrl\n    // ...省略\n\n    // 3. 为新窗口添加链接\n    blankLink.location = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700917-16708","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])])]),t._v(" "),n("li",[t._v("支付宝app内部webview（通过扫描商品详情页面链接二维码进入）"),n("div",{staticClass:"language-vue extra-class"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- vue --\x3e")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 调接口获取aliPayUrl")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...省略")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 直接跳转")]),t._v("\n    window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://render.alipay.com/p/s/i/?scheme="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alipays://platformapi/startapp?appId=20000067&url="')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeURIComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://mapi.alipay.com/gateway.do?"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("aliPayUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700917-11950"}},[t._v("copy success")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n\n<script>\n    \n    // 1. 调接口获取aliPayUrl\n    // ...省略\n\n    // 2. 直接跳转\n    window.location = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700917-11950","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),n("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[n("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700917-91374"}},[t._v("Copy successed")]),n("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'\x3c!-- vue --\x3e\n\n<script>\n    \n    // 1. 调接口获取aliPayUrl\n    // ...省略\n\n    // 2. 直接跳转\n    window.location = "https://render.alipay.com/p/s/i/?scheme=" + encodeURIComponent("alipays://platformapi/startapp?appId=20000067&url=" + encodeURIComponent("https://mapi.alipay.com/gateway.do?" +aliPayUrl));\n<\/script>\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700917-91374","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])])])])])])])]),t._v(" "),n("star-star"),t._v(" "),n("comment-comment"),t._v(" "),n("back-to-top")],1)}),[],!1,null,null,null);a.default=s.exports}}]);