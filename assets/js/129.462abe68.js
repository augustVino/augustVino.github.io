(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{685:function(t,e,c){"use strict";c.r(e);var n=c(59),o=Object(n.a)({},(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[c("h1",{attrs:{id:"whisle-使用实践"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#whisle-使用实践"}},[t._v("#")]),t._v(" whisle 使用实践")]),t._v(" "),c("p",[c("code",[t._v("whistle")]),t._v("是一款用node实现的跨平台的web调试工具，支持"),c("strong",[t._v("查看修改")]),c("code",[t._v("http(s)")]),t._v("、"),c("code",[t._v("Websocket")]),t._v("连接的请求和响应内容。简而言之就是 "),c("strong",[t._v("Node")]),t._v(" 版的 Fiddler、Charles，不过这个工具能远比后两者更加适合Web开发者、使用更简单、功能也更加实用，而笔者使用了 1 个月后发现完全可以代替 "),c("strong",[t._v("Fiddler")]),t._v("、"),c("strong",[t._v("Charles")]),t._v("。")]),t._v(" "),c("p",[t._v("whistle 总结文档：http://wproxy.org/whistle/")]),t._v(" "),c("h2",{attrs:{id:"安装-运行"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#安装-运行"}},[t._v("#")]),t._v(" 安装&运行")]),t._v(" "),c("p",[t._v("whistle运行时会监听一个端口，把Chrome（或其他程序）转发到该端口的数据处理后再返回，而在Chrome里则通过一个代理层把请求转发到相应端口。")]),t._v(" "),c("p",[t._v("1.Chrome 插件"),c("a",{attrs:{href:"https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif",target:"_blank",rel:"noopener noreferrer"}},[t._v("SwitchyOmega"),c("OutboundLink")],1)]),t._v(" "),c("div",{staticClass:"language-bash extra-class"},[c("pre",{pre:!0,attrs:{class:"language-bash"}},[c("code",[c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装")]),t._v("\n"),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g whistle\n\n"),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 运行")]),t._v("\nw2 start\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700858-43907"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 安装\nsudo npm i -g whistle\n\n# 运行\nw2 start\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700858-43907","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700858-39559"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 安装\nsudo npm i -g whistle\n\n# 运行\nw2 start\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700858-39559","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("最后，打开"),c("a",{attrs:{href:"http://local.whistlejs.com/#network",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://local.whistlejs.com/#network"),c("OutboundLink")],1),t._v("即可进入控制台界面")]),t._v(" "),c("h2",{attrs:{id:"常用功能一览"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#常用功能一览"}},[t._v("#")]),t._v(" 常用功能一览")]),t._v(" "),c("ul",[c("li",[t._v("绑定host")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：相当于浏览器层的host文件，如果找不到再去查找本机的host文件\n10.255.223.117  e.dangdang.com\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-16345"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：相当于浏览器层的host文件，如果找不到再去查找本机的host文件\n10.255.223.117  e.dangdang.com\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-16345","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-47048"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：相当于浏览器层的host文件，如果找不到再去查找本机的host文件\n10.255.223.117  e.dangdang.com\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-47048","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("替换请求")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：请求百度的时候会返回京东的页面内容\nhttps://m.baidu.com  https://wq.jd.com\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-24745"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：请求百度的时候会返回京东的页面内容\nhttps://m.baidu.com  https://wq.jd.com\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-24745","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-1044"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：请求百度的时候会返回京东的页面内容\nhttps://m.baidu.com  https://wq.jd.com\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-1044","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("修改返回码")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：使http返回404\nhttps://m.baidu.com  statusCode://404\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-17974"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：使http返回404\nhttps://m.baidu.com  statusCode://404\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-17974","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-92397"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：使http返回404\nhttps://m.baidu.com  statusCode://404\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-92397","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("往 html 插入脚本")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v('# 说明：会在网页最后以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 "value" 下可找到\nhttps://wq.jd.com  js://{test.js}\nhttps://wq.jd.com  js:///Users/Vino/Document/test.js\n')]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-63734"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'# 说明：会在网页最后以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 "value" 下可找到\nhttps://wq.jd.com  js://{test.js}\nhttps://wq.jd.com  js:///Users/Vino/Document/test.js\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-63734","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-11084"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'# 说明：会在网页最后以 script 标签的形式插入，花括号的值是内置编辑器保存的文件，在主菜单 "value" 下可找到\nhttps://wq.jd.com  js://{test.js}\nhttps://wq.jd.com  js:///Users/Vino/Document/test.js\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-11084","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("往 html 插入样式")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：在网页里以 style 标签的形式插入\nhttp://wq.jd.com  css://{test.css}\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-48540"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：在网页里以 style 标签的形式插入\nhttp://wq.jd.com  css://{test.css}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-48540","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-13443"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：在网页里以 style 标签的形式插入\nhttp://wq.jd.com  css://{test.css}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-13443","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("文本类请求 append 内容、替换返回内容")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：会把内容 append 到请求后面\nhttp://mydomain.com/style.css  resAppend://{myAppend.css}\n# 说明：完全替换请求内容\nhttp://mydomain.com/style.css  resBody://{myResBody.css}\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-20741"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：会把内容 append 到请求后面\nhttp://mydomain.com/style.css  resAppend://{myAppend.css}\n# 说明：完全替换请求内容\nhttp://mydomain.com/style.css  resBody://{myResBody.css}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-20741","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-41332"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：会把内容 append 到请求后面\nhttp://mydomain.com/style.css  resAppend://{myAppend.css}\n# 说明：完全替换请求内容\nhttp://mydomain.com/style.css  resBody://{myResBody.css}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-41332","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("ul",[c("li",[t._v("weinre 调试页面")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("# 说明：为 https://wq.jd.com 页面快速添加一个 weinre 调试脚本，点击 http://local.whistlejs.com/weinre/client/#debug_mypage 或界面主菜单 “Weinre” 可打开 inspect 界面调试该页面\nhttps://wq.jd.com  weinre://debug_mypage\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-56199"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：为 https://wq.jd.com 页面快速添加一个 weinre 调试脚本，点击 http://local.whistlejs.com/weinre/client/#debug_mypage 或界面主菜单 “Weinre” 可打开 inspect 界面调试该页面\nhttps://wq.jd.com  weinre://debug_mypage\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-56199","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-31573"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"# 说明：为 https://wq.jd.com 页面快速添加一个 weinre 调试脚本，点击 http://local.whistlejs.com/weinre/client/#debug_mypage 或界面主菜单 “Weinre” 可打开 inspect 界面调试该页面\nhttps://wq.jd.com  weinre://debug_mypage\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-31573","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("更多的使用方法可以参考 "),c("a",{attrs:{href:"http://wproxy.org/whistle/rules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("whistle 协议列表"),c("OutboundLink")],1)]),t._v(" "),c("h3",{attrs:{id:"小结"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),c("p",[t._v("从上面可以看出 "),c("code",[t._v("whistle")]),t._v(" 的大致工作流程：")]),t._v(" "),c("ol",[c("li",[t._v("配置需要修改的 url 地址")]),t._v(" "),c("li",[t._v("编写 URI 协议，如 "),c("code",[t._v("statusCode://")])]),t._v(" "),c("li",[t._v("编写协议对应的参数，如 "),c("code",[t._v("statusCode://404")])])]),t._v(" "),c("p",[t._v("可以看出 "),c("code",[t._v("whistle")]),t._v(" 的操作都是通过文本配置去实现，比较符合程序员的思维。")]),t._v(" "),c("p",[c("code",[t._v("whistle")]),t._v(" 可操作的资源的 "),c("code",[t._v("request")]),t._v(" 、 "),c("code",[t._v("respond")]),t._v(" 的 "),c("code",[t._v("header")]),t._v("、"),c("code",[t._v("body")]),t._v("，其中 "),c("code",[t._v("header")]),t._v(" 里面的"),c("code",[t._v("query")]),t._v("、"),c("code",[t._v("ua")]),t._v("、"),c("code",[t._v("cookie")]),t._v("、"),c("code",[t._v("status Code")]),t._v(" 等数据对前端来说非常熟悉，也都有相应的协议去操作这些数据。")]),t._v(" "),c("p",[t._v("另外，"),c("code",[t._v("whistle")]),t._v(" 很多操作协议都是针对前端开发友好的，比如 "),c("code",[t._v("html")]),t._v("、 "),c("code",[t._v("js")]),t._v("、 "),c("code",[t._v("css")]),t._v(" 等类型请求的修改协议对于前端程序员来说都非常亲切。")]),t._v(" "),c("h2",{attrs:{id:"使用建议"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#使用建议"}},[t._v("#")]),t._v(" 使用建议")]),t._v(" "),c("h3",{attrs:{id:"_1-代替本地的-host-文件"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#_1-代替本地的-host-文件"}},[t._v("#")]),t._v(" 1.代替本地的 host 文件")]),t._v(" "),c("p",[t._v("由于 "),c("code",[t._v("whistle")]),t._v(" 兼容操作系统的 "),c("code",[t._v("host")]),t._v(" 语法格式，所以在浏览器层面的 "),c("code",[t._v("host")]),t._v(" 配置可轻松代替本地的 "),c("code",[t._v("host")]),t._v(" 文件。这样做的主要好处是"),c("strong",[t._v("无缓存，切换时生效更快")]),t._v("。")]),t._v(" "),c("p",[t._v("有一个技巧就是在 “"),c("code",[t._v("Rules")]),t._v("” 界面下，可配多套 "),c("code",[t._v("host")]),t._v(" 配置，比如 "),c("code",[t._v("dev")]),t._v("、"),c("code",[t._v("gamma")]),t._v(" 等满足开发需求。")]),t._v(" "),c("image-image",{attrs:{imgSrc:"/img/tool1.5-1.webp",imgAlt:"tool1.5-1"}}),t._v(" "),c("h3",{attrs:{id:"_2-多终端代理"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#_2-多终端代理"}},[t._v("#")]),t._v(" 2.多终端代理")]),t._v(" "),c("ul",[c("li",[t._v("手机的 wifi 设置里，打开代理，连接本机 ip 和 8899 端口即可查看手机的网页请求")]),t._v(" "),c("li",[t._v("电脑其余程序的代理设置，也可通过本机 ip 和 8899 端口的形式使用 whistle 查看请求，比如微信 web 开发者工具")])]),t._v(" "),c("div",{staticClass:"custom-block warning"},[c("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),c("p",[t._v("以上操作均需要在同一个局域网内")])]),t._v(" "),c("h3",{attrs:{id:"_3-转换-http-协议"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#_3-转换-http-协议"}},[t._v("#")]),t._v(" 3.转换 http 协议")]),t._v(" "),c("p",[t._v("转发协议+域名转发，轻松本地模拟 "),c("code",[t._v("https")]),t._v(" ，访问线上的 "),c("code",[t._v("https")]),t._v(" 域名实际上指向的是本地的 "),c("code",[t._v("http")]),t._v(" 调试地址。")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("https://wq.jd.com  http://localhost:9000\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-42836"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"https://wq.jd.com  http://localhost:9000\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-42836","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700859-17791"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"https://wq.jd.com  http://localhost:9000\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700859-17791","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("div",{staticClass:"custom-block warning"},[c("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),c("p",[t._v("涉及到 "),c("code",[t._v("https")]),t._v(" 的请求都需要您的电脑和手机等都安装 "),c("code",[t._v("whistle")]),t._v(" 提供的证书，详情可看文档。")])]),t._v(" "),c("h3",{attrs:{id:"_4-mock-数据"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#_4-mock-数据"}},[t._v("#")]),t._v(" 4. mock 数据")]),t._v(" "),c("p",[t._v("whistle 提供了一个强大的 "),c("code",[t._v("mock")]),t._v(" 数据的插件，强大之处是可以结合 js 语句 + mock 语法去生成数据。举一个简单的例子说明用法：")]),t._v(" "),c("p",[t._v("先安装插件：")]),t._v(" "),c("div",{staticClass:"language-bash extra-class"},[c("pre",{pre:!0,attrs:{class:"language-bash"}},[c("code",[c("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g whistle.vase\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700860-93434"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm i -g whistle.vase\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700860-93434","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700860-84330"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"npm i -g whistle.vase\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700860-84330","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("在 “"),c("code",[t._v("Plugins")]),t._v("” 菜单打开 "),c("code",[t._v("vase")]),t._v(" 的界面，新建一个名字为 “"),c("code",[t._v("mock_json_demo")]),t._v("” 的配置，并选择模板为 "),c("code",[t._v("mock")]),t._v(" 。输入如下内容：")]),t._v(" "),c("div",{staticClass:"language-json extra-class"},[c("pre",{pre:!0,attrs:{class:"language-json"}},[c("code",[c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"list |10"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     \t"),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@string"')]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \t"),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"avatar"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://lorempixel.com/100/100/"')]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \t"),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id |+1"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \t"),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"list |3"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@string"')]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),c("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id |+1"')]),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n        "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700860-41477"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n    "list |10": [{\n     \t"name": "@string",\n      \t"avatar": "http://lorempixel.com/100/100/",\n      \t"id |+1": 10000,\n      \t"list |3": [{\n            "name": "@string",\n            "id |+1": 100\n        }]\n    }]\n}\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700860-41477","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700860-18562"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":'{\n    "list |10": [{\n     \t"name": "@string",\n      \t"avatar": "http://lorempixel.com/100/100/",\n      \t"id |+1": 10000,\n      \t"list |3": [{\n            "name": "@string",\n            "id |+1": 100\n        }]\n    }]\n}\n',"data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700860-18562","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("blockquote",[c("p",[t._v("不熟悉 mock 语法的朋友可以到"),c("a",{attrs:{href:"https://github.com/nuysoft/Mock/wiki/Syntax-Specification",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),c("OutboundLink")],1),t._v("了解一下")])]),t._v(" "),c("image-image",{attrs:{imgSrc:"/img/tool1.5-2.webp",imgAlt:"tool1.5-2"}}),t._v(" "),c("p",[t._v("在 “"),c("code",[t._v("Rules")]),t._v("” 下配置一条 "),c("code",[t._v("vase")]),t._v(" 的规则：")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("http://mock.local/data.json  vase://mock_json_demo\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700864-24522"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"http://mock.local/data.json  vase://mock_json_demo\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700864-24522","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700864-16982"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"http://mock.local/data.json  vase://mock_json_demo\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700864-16982","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("打开测试地址 http://mock.local/data.json ，即可看到模拟的数据。")]),t._v(" "),c("image-image",{attrs:{imgSrc:"/img/tool1.5-3.webp",imgAlt:"tool1.5-3"}}),t._v(" "),c("p",[t._v("有读者可能会问，如果想更自由度更高一点，用 js 去生成数据是否可行？")]),t._v(" "),c("p",[t._v("当然可行，"),c("code",[t._v("vase")]),t._v(" 提供了一种 “"),c("code",[t._v("script")]),t._v("” 模板可实现这种需求，里面可以写一些简单的 "),c("code",[t._v("javascript API")]),t._v("，还提供了 req（"),c("code",[t._v("request")]),t._v("）等内置数据对象，可以获取如请求的 "),c("code",[t._v("headers")]),t._v("、"),c("code",[t._v("method")]),t._v("、"),c("code",[t._v("body")]),t._v("、"),c("code",[t._v("query")]),t._v("、"),c("code",[t._v("url")]),t._v(" 等数据。")]),t._v(" "),c("p",[t._v("既然这些数据都有了，是不是可以搞事情了？我有一个大胆的想法，请看下面的例子：")]),t._v(" "),c("p",[t._v("在 "),c("code",[t._v("vase")]),t._v(" 界面新建一个名为 “"),c("code",[t._v("json_engine_script")]),t._v("” 数据模板，并选择 “"),c("code",[t._v("script")]),t._v("” 模板引擎。")]),t._v(" "),c("div",{staticClass:"language-js extra-class"},[c("pre",{pre:!0,attrs:{class:"language-js"}},[c("code",[c("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" json "),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \tpage"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" req"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pi"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取url查询参数的分页字段，加到要返回的数据里，达到模拟分页数据的效果")]),t._v("\n  \ttotal"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("\n"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mock_json_demo'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mock'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// render 可以渲染上文提到名为“mock_json_demo”的数据模板，返回一个json")]),t._v("\n\n"),c("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果查询参数带了callback，则返回jsonp")]),t._v("\n\t"),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("out")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/javascript; charset=utf8'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),c("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" json_text "),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("req"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback"),c("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'('")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" json"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("')'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// join是内置方法，可合并一组数据")]),t._v("\n\t"),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("out")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json_text"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向body输出数据")]),t._v("\n"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 没有callback则返回json")]),t._v("\n\t"),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("out")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),c("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json; charset=utf8'")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),c("span",{pre:!0,attrs:{class:"token function"}},[t._v("out")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),c("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700864-3222"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var json = merge({\n  \tpage: req.query.pi, // 取url查询参数的分页字段，加到要返回的数据里，达到模拟分页数据的效果\n  \ttotal: 60\n}, render('mock_json_demo', null, 'mock')); // render 可以渲染上文提到名为“mock_json_demo”的数据模板，返回一个json\n\nif (req.query.callback) { // 如果查询参数带了callback，则返回jsonp\n\tout(header('content-type', 'application/javascript; charset=utf8'));\n\tvar json_text = join([req.query.callback+'(', json, ')']); // join是内置方法，可合并一组数据\n\tout(json_text); // 向body输出数据\n} else { // 没有callback则返回json\n\tout(header('content-type', 'application/json; charset=utf8'));\n\tout(json);\n}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700864-3222","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700864-12279"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"var json = merge({\n  \tpage: req.query.pi, // 取url查询参数的分页字段，加到要返回的数据里，达到模拟分页数据的效果\n  \ttotal: 60\n}, render('mock_json_demo', null, 'mock')); // render 可以渲染上文提到名为“mock_json_demo”的数据模板，返回一个json\n\nif (req.query.callback) { // 如果查询参数带了callback，则返回jsonp\n\tout(header('content-type', 'application/javascript; charset=utf8'));\n\tvar json_text = join([req.query.callback+'(', json, ')']); // join是内置方法，可合并一组数据\n\tout(json_text); // 向body输出数据\n} else { // 没有callback则返回json\n\tout(header('content-type', 'application/json; charset=utf8'));\n\tout(json);\n}\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700864-12279","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("在 “"),c("code",[t._v("Rules")]),t._v("” 输入以下配置：")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",{pre:!0,attrs:{class:"language-text"}},[c("code",[t._v("http://mock.local/data.json  vase://json_engine_script\n# 注释掉上一条配置\n# http://mock.local/data.json  vase://mock_json_demo\n")]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700865-46147"}},[t._v("copy success")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"http://mock.local/data.json  vase://json_engine_script\n# 注释掉上一条配置\n# http://mock.local/data.json  vase://mock_json_demo\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700865-46147","data-mdic-notify-delay":"2000","data-mdic-copy-fail-text":"copy fail",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("copy")])]),c("div",{pre:!0,attrs:{class:"m-mdic-copy-wrapper"}},[c("div",{pre:!0,attrs:{class:"u-mdic-copy-notify",id:"j-notify-1589775700865-74248"}},[t._v("Copy successed")]),c("button",{pre:!0,attrs:{class:"u-mdic-copy-btn j-mdic-copy-btn","data-mdic-content":"http://mock.local/data.json  vase://json_engine_script\n# 注释掉上一条配置\n# http://mock.local/data.json  vase://mock_json_demo\n","data-mdic-attach-content":"","data-mdic-notify-id":"j-notify-1589775700865-74248","data-mdic-notify-delay":"1000","data-mdic-copy-fail-text":"Copy failed",onclick:"!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\\n\\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);"}},[t._v("Copy")])])])]),c("p",[t._v("打开 http://mock.local/data.json?callback=cb&pi=1 ，可尝试改变、删除 "),c("code",[t._v("callback")]),t._v("、"),c("code",[t._v("pi")]),t._v(" 参数，会发现返回的数据会随之改变。")]),t._v(" "),c("image-image",{attrs:{imgSrc:"/img/tool1.5-4.webp",imgAlt:"tool1.5-4"}}),t._v(" "),c("p",[t._v("至此就完成了一个简单的、有一定扩展性的 "),c("code",[t._v("restful")]),t._v(" 数据接口模拟。")]),t._v(" "),c("star-star"),t._v(" "),c("comment-comment"),t._v(" "),c("back-to-top")],1)}),[],!1,null,null,null);e.default=o.exports}}]);